<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>！</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <style type="text/css">
    .show {
      background: #7cd2f8;
      width: 100px;
      height: 100px;
      text-align: center;
      position: absolute;
      z-index: 1;
      left: 100px;
      top: 100px;
    }
  </style>
  <script type="text/javascript">
    $(document).ready(function () {
      $(".show").mousedown(function (e) {
        //e鼠标事件
        var offset = $(this).offset(); //DIV在页面的位置
        var x = e.pageX - offset.left; //获得鼠标指针离DIV元素左边界的距离
        var y = e.pageY - offset.top; //获得鼠标指针离DIV元素上边界的距离
        $(document).on("mousemove", function (ev) {
          //绑定鼠标的移动事件，因为光标在DIV元素外面也要有效果，
          //所以要用doucment的事件，而不用DIV元素的事件
          $(".show").stop(); //加上这个之后

          var _x = ev.pageX - x; //获得X轴方向移动的值
          var _y = ev.pageY - y; //获得Y轴方向移动的值

          $(".show").animate({ left: _x + "px", top: _y + "px" }, 1);
        });
      });

      $(document).mouseup(function () {
        $(".show").css("cursor", "default");
        $(this).unbind("mousemove");
      });
    });
  </script>
  <body>
    <div class="show">jquery实现DIV层拖动</div>
  </body>
</html>
